<div class="search-container">
  <app-search (search)="handleSearch($event)"></app-search>
</div>

<div class="main-container">
  <div class="user-details-container">
    <img [src]="userData.avatar" alt="User Avatar" />
    <div class="user-info">
      <p>{{ userData.username }}</p>
      <p>Joined: {{ convertTime(userData.joined) }}</p>
      <p>Last online: {{ convertTime(userData.last_online) }}</p>
    </div>
  </div>

  <div class="stats-container">
    <div class="stats-section">
      <h3 class="text-center">Daily</h3>
      <p class="text-center">{{ userStatsData.chess_daily.last.rating }} ELO</p>
      <div class="record-boxes">
        <div class="record-box win">
          {{ userStatsData.chess_daily.record.win }}W
        </div>
        <div class="record-box loss">
          {{ userStatsData.chess_daily.record.loss }}L
        </div>
        <div class="record-box draw">
          {{ userStatsData.chess_daily.record.draw }}D
        </div>
      </div>
    </div>

    <div class="stats-section">
      <h3 class="text-center">Rapid</h3>
      <p class="text-center">{{ userStatsData.chess_rapid.last.rating }} ELO</p>
      <div class="record-boxes">
        <div class="record-box win">
          {{ userStatsData.chess_rapid.record.win }}W
        </div>
        <div class="record-box loss">
          {{ userStatsData.chess_rapid.record.loss }}L
        </div>
        <div class="record-box draw">
          {{ userStatsData.chess_rapid.record.draw }}D
        </div>
      </div>
    </div>

    <div class="stats-section">
      <h3 class="text-center">Blitz</h3>
      <p class="text-center">{{ userStatsData.chess_blitz.last.rating }} ELO</p>
      <div class="record-boxes">
        <div class="record-box win">
          {{ userStatsData.chess_blitz.record.win }}W
        </div>
        <div class="record-box loss">
          {{ userStatsData.chess_blitz.record.loss }}L
        </div>
        <div class="record-box draw">
          {{ userStatsData.chess_blitz.record.draw }}D
        </div>
      </div>
    </div>
  </div>

  <div class="recent-games-container">
    @for (game of userGameData; track $index) {
    <div class="game-card">
      <p>
        <strong>{{ game.white.username }}</strong> ({{ game.white.rating }}) vs
        <strong>{{ game.black.username }}</strong> ({{ game.black.rating }})
      </p>
      <p>{{ convertTime(game.end_time) }}</p>
      <p>Result: {{ game.black }}</p>
      <p><a [href]="game['url']" target="_blank">Link to game</a></p>
    </div>
    <div>{{ game.white | json }}</div>
    <div>{{ game.black | json }}</div>
    <p>------------------------------</p>
    }
  </div>
  <!-- <p>{{ userGameData.games | json }}</p> -->
</div>
